

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OrderFactory &mdash; QF Lib  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Order" href="qf_lib.backtesting.order.order.Order.html" />
    <link rel="prev" title="BacktestResult" href="qf_lib.backtesting.monitoring.backtest_result.BacktestResult.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> QF Lib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../analysis.html">analysis</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../backtesting.html">backtesting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#alpha-model">alpha_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#contract">contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#data-handler">data_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#events">events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#execution-handler">execution_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#fast-alpha-model-tester">fast_alpha_model_tester</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#monitoring">monitoring</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../backtesting.html#order">order</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">OrderFactory</a></li>
<li class="toctree-l3"><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html">Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html">TimeInForce</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#orders-filter">orders_filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#portfolio">portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#position-sizer">position_sizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#signals">signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#strategies">strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#trading-session">trading_session</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../common.html">common</a></li>
<li class="toctree-l1"><a class="reference internal" href="../containers.html">containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_providers.html">data_providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../document_utils.html">document_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting.html">plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indicators.html">indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../portfolio_construction.html">portfolio_construction</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QF Lib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../backtesting.html">backtesting</a> &raquo;</li>
        
      <li>OrderFactory</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="orderfactory">
<h1>OrderFactory<a class="headerlink" href="#orderfactory" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory">
<em class="property">class </em><code class="sig-prename descclassname">qf_lib.backtesting.order.order_factory.</code><code class="sig-name descname">OrderFactory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">broker</span><span class="p">:</span> <span class="n">qf_lib.backtesting.broker.broker.Broker</span></em>, <em class="sig-param"><span class="n">data_provider</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.data_providers.data_provider.DataProvider.html#qf_lib.data_providers.data_provider.DataProvider" title="qf_lib.data_providers.data_provider.DataProvider">qf_lib.data_providers.data_provider.DataProvider</a></span></em>, <em class="sig-param"><span class="n">contract_to_ticker_mapper</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper.html#qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper" title="qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper">qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates Orders.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>broker</strong> (<em>Broker</em>) – broker used to access the portfolio</p></li>
<li><p><strong>data_provider</strong> (<a class="reference internal" href="qf_lib.data_providers.data_provider.DataProvider.html#qf_lib.data_providers.data_provider.DataProvider" title="qf_lib.data_providers.data_provider.DataProvider"><em>DataProvider</em></a>) – data provider used to download prices. In case of backtesting, the DataHandler wrapper should be used.</p></li>
<li><p><strong>contract_to_ticker_mapper</strong> (<a class="reference internal" href="qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper.html#qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper" title="qf_lib.backtesting.contract.contract_to_ticker_conversion.base.ContractTickerMapper"><em>ContractTickerMapper</em></a>) – object mapping contracts to tickers</p></li>
</ul>
</dd>
</dl>
<p><strong>Methods</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#qf_lib.backtesting.order.order_factory.OrderFactory.orders" title="qf_lib.backtesting.order.order_factory.OrderFactory.orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code></a>(quantities, int], execution_style, …)</p></td>
<td><p>Creates a list of Orders for given numbers of shares for each given asset.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#qf_lib.backtesting.order.order_factory.OrderFactory.percent_orders" title="qf_lib.backtesting.order.order_factory.OrderFactory.percent_orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">percent_orders</span></code></a>(percentages, float], …)</p></td>
<td><p>Creates a list of Orders by specifying the percentage of the current portfolio value which should be spent on each asset.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#qf_lib.backtesting.order.order_factory.OrderFactory.target_orders" title="qf_lib.backtesting.order.order_factory.OrderFactory.target_orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_orders</span></code></a>(target_quantities, float], …)</p></td>
<td><p>Creates a list of Orders from a dictionary of desired target number of shares (number of shares which should be present in the portfolio after executing the Order).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#qf_lib.backtesting.order.order_factory.OrderFactory.target_percent_orders" title="qf_lib.backtesting.order.order_factory.OrderFactory.target_percent_orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_percent_orders</span></code></a>(target_percentages, …)</p></td>
<td><p>Creates an Order adjusting a position to a value equal to the given percentage of the portfolio.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#qf_lib.backtesting.order.order_factory.OrderFactory.target_value_orders" title="qf_lib.backtesting.order.order_factory.OrderFactory.target_value_orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_value_orders</span></code></a>(target_values, float], …)</p></td>
<td><p>Creates a list of Orders by specifying how much should be allocated in each asset after the Orders have been executed.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#qf_lib.backtesting.order.order_factory.OrderFactory.value_orders" title="qf_lib.backtesting.order.order_factory.OrderFactory.value_orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">value_orders</span></code></a>(values, float], …)</p></td>
<td><p>Creates a list of Orders by specifying the amount of money which should be spent on each asset rather than the number of shares to buy/sell.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory.orders">
<code class="sig-name descname">orders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">quantities</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">execution_style</span><span class="p">:</span> <span class="n">qf_lib.backtesting.order.execution_style.ExecutionStyle</span></em>, <em class="sig-param"><span class="n">time_in_force</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce">qf_lib.backtesting.order.time_in_force.TimeInForce</a></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">qf_lib.backtesting.order.order.Order</a><span class="p">]</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory.orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory.orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of Orders for given numbers of shares for each given asset.</p>
<p>Orders requiring 0 shares will be removed from resulting order list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>quantities</strong> (<em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – mapping of a Contract to an amount of shares which should be bought/sold.
If number is positive then asset will be bought. Otherwise it will be sold.</p></li>
<li><p><strong>execution_style</strong> (<em>ExecutionStyle</em>) – execution style of an order (e.g. MarketOrder, StopOrder, etc.)</p></li>
<li><p><strong>time_in_force</strong> (<a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce"><em>TimeInForce</em></a>) – e.g. ‘DAY’ (Order valid for one trading session), ‘GTC’ (good till cancelled)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of generated orders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">Order</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory.percent_orders">
<code class="sig-name descname">percent_orders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">percentages</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">execution_style</span><span class="p">:</span> <span class="n">qf_lib.backtesting.order.execution_style.ExecutionStyle</span></em>, <em class="sig-param"><span class="n">time_in_force</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce">qf_lib.backtesting.order.time_in_force.TimeInForce</a></span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">qf_lib.backtesting.order.order.Order</a><span class="p">]</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory.percent_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory.percent_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of Orders by specifying the percentage of the current portfolio value which should be spent
on each asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>percentages</strong> (<em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – mapping of a Contract to a percentage value of the current portfolio which should be allocated in the asset.
This is specified as a decimal value (e.g. 0.5 means 50%)</p></li>
<li><p><strong>execution_style</strong> (<em>ExecutionStyle</em>) – execution style of an order (e.g. MarketOrder, StopOrder, etc.)</p></li>
<li><p><strong>time_in_force</strong> (<a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce"><em>TimeInForce</em></a>) – e.g. ‘DAY’ (Order valid for one trading session), ‘GTC’ (good till cancelled)</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency for the last available price sampling (daily or minutely)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of generated orders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">Order</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory.target_orders">
<code class="sig-name descname">target_orders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_quantities</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">execution_style</span><span class="p">:</span> <span class="n">qf_lib.backtesting.order.execution_style.ExecutionStyle</span></em>, <em class="sig-param"><span class="n">time_in_force</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce">qf_lib.backtesting.order.time_in_force.TimeInForce</a></span></em>, <em class="sig-param"><span class="n">tolerance_quantities</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">qf_lib.backtesting.order.order.Order</a><span class="p">]</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory.target_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory.target_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of Orders from a dictionary of desired target number of shares (number of shares which should be
present in the portfolio after executing the Order).</p>
<p>If the position doesn’t already exist, the new Order is placed for the :target_quantity of shares.
If the position does exist the Order for the difference between the target number of shares
and the current number of shares is placed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_quantities</strong> (<em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – mapping of a Contract to a target number of shares which should be present in the portfolio after the Order
is executed. After comparing with tolerance the math.floor of the quantity will be taken.</p></li>
<li><p><strong>execution_style</strong> (<em>ExecutionStyle</em>) – execution style of an order (e.g. MarketOrder, StopOrder, etc.)</p></li>
<li><p><strong>time_in_force</strong> (<a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce"><em>TimeInForce</em></a>) – e.g. ‘DAY’ (Order valid for one trading session), ‘GTC’ (good till cancelled)</p></li>
<li><p><strong>tolerance_quantities</strong> (<em>None</em><em>, </em><em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – tells what is a tolerance for the target_quantities (in both directions) for each Contract.
The tolerance is expressed in shares.
For example: assume that currently the portfolio contains 100 shares of asset A.
then calling target_orders({A: 101}, …, tolerance_quantities={A: 2}) will not generate any trades as
the tolerance of 2 allows the allocation to be 100. while target value is 101.
Another example:
assume that currently the portfolio contains 100 shares of asset A.
then calling target_value_order({A: 103}, …, tolerance_quantities={A: 2}) will generate a BUY order
for 3 shares
if abs(target - actual) &gt; tolerance buy or sell assets to match the target
If tolerance for a specific contract is not provided it is assumed to be 0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of generated orders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">Order</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory.target_percent_orders">
<code class="sig-name descname">target_percent_orders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_percentages</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">execution_style</span><span class="p">:</span> <span class="n">qf_lib.backtesting.order.execution_style.ExecutionStyle</span></em>, <em class="sig-param"><span class="n">time_in_force</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce">qf_lib.backtesting.order.time_in_force.TimeInForce</a></span></em>, <em class="sig-param"><span class="n">tolerance_percentage</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">qf_lib.backtesting.order.order.Order</a><span class="p">]</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory.target_percent_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory.target_percent_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an Order adjusting a position to a value equal to the given percentage of the portfolio.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_percentages</strong> (<em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – mapping of a Contract to a percentage of a current portfolio value which should be allocated in each asset
after the Order has been carried out</p></li>
<li><p><strong>execution_style</strong> (<em>ExecutionStyle</em>) – execution style of an order (e.g. MarketOrder, StopOrder, etc.)</p></li>
<li><p><strong>time_in_force</strong> (<a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce"><em>TimeInForce</em></a>) – e.g. ‘DAY’ (Order valid for one trading session), ‘GTC’ (good till cancelled)</p></li>
<li><p><strong>tolerance_percentage</strong> (<em>float</em>) – tells the us what is a tolerance to the target_percentages (in both directions). The tolerance is expressed
in percentage points (0.02 corresponds to 2pp of the target_value). For more details look at the description
of target_value_orders.</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency for the last available price sampling (daily or minutely)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of generated orders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">Order</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory.target_value_orders">
<code class="sig-name descname">target_value_orders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_values</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">execution_style</span><span class="p">:</span> <span class="n">qf_lib.backtesting.order.execution_style.ExecutionStyle</span></em>, <em class="sig-param"><span class="n">time_in_force</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce">qf_lib.backtesting.order.time_in_force.TimeInForce</a></span></em>, <em class="sig-param"><span class="n">tolerance_percentage</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">qf_lib.backtesting.order.order.Order</a><span class="p">]</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory.target_value_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory.target_value_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of Orders by specifying how much should be allocated in each asset after the Orders
have been executed.</p>
<p>For example if we’ve already have 10M invested in ‘SPY US Equity’ and you call this method with target value of 11M
then only 1M will be spent on this asset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_values</strong> (<em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – mapping of a Contract to a value which should be allocated in the asset after the Order has been executed
(expressed in the currency in which the asset is traded)</p></li>
<li><p><strong>execution_style</strong> (<em>ExecutionStyle</em>) – execution style of an order (e.g. MarketOrder, StopOrder, etc.)</p></li>
<li><p><strong>time_in_force</strong> (<a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce"><em>TimeInForce</em></a>) – e.g. ‘DAY’ (Order valid for one trading session), ‘GTC’ (good till cancelled)</p></li>
<li><p><strong>tolerance_percentage</strong> (<em>float</em>) – tells the us what is a tolerance to the target_values (in both directions).
The tolerance is expressed as percentage of target_values.
For example: assume that currently the portfolio contains asset A with allocation 10 000$.
then calling target_value_order({A: 10 500}, …, tolerance_percentage=0.05) will not generate any trades as
the tolerance of 0.05 allows the allocation to be 10 000$, while target value is 10 500$ (tolerance value
would be equal to 0.05 * 10 500 = 525 and the difference between current and target value would be &lt; 525$).
Another example:
For example: assume that currently the portfolio contains asset A with allocation 10 000$.
then calling target_value_order({A: 13 000}, …, tolerance_percentage=0.1) will generate a BUY order
corresponding to 3000$ of shares. The tolerance of 0.1 does not allow a difference of 3000$
if abs(target - actual) &gt; tolerance_percentage *  target value</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency for the last available price sampling (daily or minutely)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of generated orders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">Order</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.order.order_factory.OrderFactory.value_orders">
<code class="sig-name descname">value_orders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">values</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract">qf_lib.backtesting.contract.contract.Contract</a><span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">execution_style</span><span class="p">:</span> <span class="n">qf_lib.backtesting.order.execution_style.ExecutionStyle</span></em>, <em class="sig-param"><span class="n">time_in_force</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce">qf_lib.backtesting.order.time_in_force.TimeInForce</a></span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">qf_lib.backtesting.order.order.Order</a><span class="p">]</span><a class="reference internal" href="../_modules/qf_lib/backtesting/order/order_factory.html#OrderFactory.value_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qf_lib.backtesting.order.order_factory.OrderFactory.value_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of Orders by specifying the amount of money which should be spent on each asset rather
than the number of shares to buy/sell.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>Mapping</em><em>[</em><a class="reference internal" href="qf_lib.backtesting.contract.contract.Contract.html#qf_lib.backtesting.contract.contract.Contract" title="qf_lib.backtesting.contract.contract.Contract"><em>Contract</em></a><em>, </em><em>int</em><em>]</em>) – mapping of a Contract to the amount of money which should be spent on the asset (expressed in the currency
in which the asset is traded)</p></li>
<li><p><strong>execution_style</strong> (<em>ExecutionStyle</em>) – execution style of an order (e.g. MarketOrder, StopOrder, etc.)</p></li>
<li><p><strong>time_in_force</strong> (<a class="reference internal" href="qf_lib.backtesting.order.time_in_force.TimeInForce.html#qf_lib.backtesting.order.time_in_force.TimeInForce" title="qf_lib.backtesting.order.time_in_force.TimeInForce"><em>TimeInForce</em></a>) – e.g. ‘DAY’ (Order valid for one trading session), ‘GTC’ (good till cancelled)</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency for the last available price sampling</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of generated orders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="qf_lib.backtesting.order.order.Order.html#qf_lib.backtesting.order.order.Order" title="qf_lib.backtesting.order.order.Order">Order</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="qf_lib.backtesting.order.order.Order.html" class="btn btn-neutral float-right" title="Order" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="qf_lib.backtesting.monitoring.backtest_result.BacktestResult.html" class="btn btn-neutral float-left" title="BacktestResult" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>